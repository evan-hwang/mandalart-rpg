# Mandal-Art 앱 계획서 (초안)

이 문서는 코드 작성 전에 합의해야 할 범위, 구조, 기술 선택, 릴리스 단계, 리스크를 정리한 계획서입니다.

## 0) 제품 맥락 및 철학
- 목적: 1년 단위 목표를 만다라트(중앙 1, 코어 8, 서브 64)로 관리
- 종이 차트의 불편함(수정 어려움, 분실, 시각 한계) 해결
- 모바일 퍼스트, 웹(PWA 등) 지원
- 오프라인 퍼스트: 로컬 저장소/SQLite, MVP는 로그인 없음
- 장기 사용(1년)을 전제로 동기부여/성취감 강화
- 게임화는 MVP에 최소만, 향후 확장 가능해야 함

## 1) 사용자 스토리 (MVP)
- 사용자는 연도(기간)별 만다라트(9x9)를 생성할 수 있다.
- 사용자는 셀을 탭해 목표 텍스트를 수정할 수 있다.
- 사용자는 각 셀의 상태를 TODO/DOING/DONE으로 설정할 수 있다.
- 사용자는 목표별 회고(메모)를 작성할 수 있다.
- 사용자는 자동 저장으로 데이터 유실 없이 사용할 수 있다.
- 사용자는 여러 개의 만다라트를 보유하고 전환할 수 있다.
- 사용자는 만다라트별 기간(시작/종료)을 설정할 수 있다.

## 2) 정보 구조(IA) 및 데이터 모델 제안
### 내비게이션 구조
- 홈: 만다라트 목록
- 만다라트 상세: 9x9 그리드 뷰
- 목표 상세: 텍스트/상태/메모 편집
- 설정: 기본 환경 설정(추후 내보내기 등 확장 여지)

### 데이터 모델(초안)
- Mandalart
  - id, title, date_start, date_end, created_at, updated_at
- Goal
  - id, mandalart_id, parent_goal_id(센터 목표는 null)
  - position_type(CENTER/CORE/SUB)
  - grid_index(0~80)
  - title, status(TODO/DOING/DONE)
  - memo, created_at, updated_at

### 모델 설계 의도
- 단일 Goal 테이블로 계층(센터-코어-서브)을 표현해 확장성 확보
- grid_index로 9x9 배치 고정, UI 매핑 단순화
- status는 향후 진행도/시각화 애니메이션 확장에 활용

## 3) 기술 스택 제안
### iOS
- Flutter(Dart)
- 로컬 DB: SQLite + Drift

### Android
- Flutter(Dart)
- 로컬 DB: SQLite + Drift

### Web(PWA)
- Flutter Web
- 로컬 저장소: Drift Web(IndexedDB)

### 공통 구성
- 상태 관리: Riverpod
- 로컬 우선 저장 및 자동 영속화

### 선택 이유
- iOS/Android/Web 단일 코드베이스로 유지보수 효율
- 애니메이션/인터랙션 구현이 강점
- 오프라인 퍼스트 구조에 적합
- CI/CD(예: GitHub Actions + Fastlane) 확장 용이

## 4) 릴리스 플랜(Agile)
### Planning (0~1주)
- 사용자 흐름 정의: 생성 → 편집 → 상태 전환 → 회고 → 목록 전환
- 그리드 규칙/데이터 모델 확정(센터/코어/서브 매핑)
- MVP 범위 및 제외 범위 확정(로그인/클라우드/공유 제외)
- 시각 방향 합의(정보 위계, 컬러 규칙, 애니메이션 수준)
- 성공 기준 정의(예: 1년 사용 가정에서 유지/편집 흐름 3탭 이하)

### Release 1: Core MVP (2~4주)
#### 사용자 스토리
- 사용자는 연도별 만다라트를 만들고 목록에서 전환할 수 있다.
- 사용자는 9x9 셀을 탭해 목표를 입력/수정할 수 있다.
- 사용자는 상태(TODO/DOING/DONE)를 변경해 진행을 표시할 수 있다.
- 사용자는 목표별 회고를 기록할 수 있다.
- 사용자는 앱을 재실행해도 데이터가 보존된 상태로 이어서 사용할 수 있다.

#### TODO
- [x] 프로젝트 구조/아키텍처 세팅(앱/홈 기본 뼈대)
- [x] 만다라트 목록 화면(임시 데이터)
- [x] 만다라트 생성/수정/삭제(임시 로컬 상태)
- [ ] 9x9 그리드 렌더링 및 셀 편집 플로우
- [ ] 상태 전환 UI(탭/스와이프 중 택1) 및 색상 규칙
- [ ] 로컬 DB 스키마/마이그레이션 초안
- [ ] 자동 저장 및 로딩 성능 기준 확정

### Release 2: UX & 시각화 (2~3주)
#### 사용자 스토리
- 사용자는 한눈에 코어 목표별 진행도를 확인할 수 있다.
- 사용자는 상태별 색상/전환으로 성취감을 느낄 수 있다.
- 사용자는 회고를 더 편하게 모아볼 수 있다.

#### TODO
- [ ] 코어 목표 요약(진행률/완료 개수) UI
- [ ] 상태 변화 시 기본 애니메이션(색상 변화/간단 트랜지션)
- [ ] 회고 보기 방식 개선(카드/타임라인 중 선택)
- [ ] 빈 상태 및 장기 사용 고려한 보상성 피드백 문구

### Release 3: Gamification 기반 (3~5주)
#### 사용자 스토리
- 사용자는 목표 완료 시 더 분명한 시각적 보상을 경험한다.
- 사용자는 전체 완성도를 수치로 확인할 수 있다.
- 사용자는 장기적으로 게임화된 성장 시스템 확장 가능성을 기대할 수 있다.

#### TODO
- [ ] 완료 시 이펙트/축하 애니메이션
- [ ] 코어 목표로 진행이 흐르는 시각 효과
- [ ] 중앙 목표 완성 애니메이션
- [ ] 수치형 진행도(점수/퍼센트) 표시
- [ ] LLM 기반 RPG 캐릭터 성장 연계 설계(데이터 이벤트/확장 포인트)

## 5) 릴리스별 리스크/의존성 매트릭스
### Release 1
- 리스크: 9x9 매핑 오류로 편집/표시 불일치 발생
- 리스크: 자동 저장 빈도 과다로 성능 저하
- 의존성: 그리드 규칙/데이터 모델 확정, 로컬 DB 마이그레이션 설계
- 대응: 편집 매핑 단위 테스트 설계, 저장 쓰로틀 기준 합의

### Release 2
- 리스크: 상태 색상/애니메이션이 가독성을 해칠 위험
- 리스크: 요약 진행도 계산 로직의 일관성 문제
- 의존성: R1 데이터 모델 안정화, 상태 정의 확정
- 대응: 컬러 대비 기준, 진행도 산식 명세화

### Release 3
- 리스크: 과도한 애니메이션으로 성능/배터리 저하
- 리스크: 게임화 확장 설계가 MVP 구조를 오염
- 의존성: 이벤트/진행도 모델 정의, 확장 포인트 합의
- 대응: 애니메이션 성능 예산 설정, 확장 API만 설계하고 구현 최소화

## 6) 사용자 여정별 KPI 및 DoD(완료 정의)
### 여정 1: 만다라트 생성/전환
- KPI: 생성 완료율, 생성 완료 시간
- DoD: 3탭 이하로 생성 가능, 목록에서 즉시 전환 가능

### 여정 2: 목표 편집
- KPI: 목표 수정 후 저장 실패율 0, 평균 편집 시간
- DoD: 셀 탭 후 1회 입력으로 저장 완료, 앱 재실행 후 데이터 유지

### 여정 3: 상태 전환
- KPI: 상태 변경 성공률, 상태 변경 후 시각 피드백 응답 시간
- DoD: 상태 변경 즉시 색상 반영, 되돌리기 흐름 명확

### 여정 4: 회고 기록
- KPI: 회고 작성률, 회고 접근 빈도
- DoD: 목표 상세에서 1탭 접근, 작성 후 자동 저장

### 여정 5: 진행도 파악(R2 이상)
- KPI: 진행도 화면 재방문율, 요약 확인 시간
- DoD: 코어 목표 요약 1스크린 내 제공, 수치/색상 일관

## 7) 기술 스파이크(검증 항목)
- 스파이크 A: 9x9 그리드 렌더링 성능(중저가 기기)
- 스파이크 B: 자동 저장 쓰로틀/디바운스 기준 실험
- 스파이크 C: Drift Web(IndexedDB) 안정성 및 데이터 복구 시나리오
- 스파이크 D: 애니메이션 성능 예산 및 프레임 드롭 허용치

## 8) 스프린트 계획(1인/야간 개발 기준)
### 전제
- 1인 개발, 평일 하루 1~2시간(주 5일 가정)
- 스프린트 길이: 2주(10시간~20시간)
- 스토리 포인트 기준: 1pt=약 1~2시간 작업량
- 스프린트 목표: 6~10pt 소화(여유 포함)

### Sprint 0 (준비/계획, 1주)
#### 스토리
- 2pt: 사용자 흐름/화면 정의 문서화
- 2pt: 데이터 모델/그리드 매핑 확정
- 2pt: 와이어프레임 2~3개(홈/그리드/목표 상세)
#### 목표 합계: 6pt

### Sprint 1 (Release 1 - 기반)
#### 스토리
- 3pt: 만다라트 목록 화면(기본 CRUD 연결 계획)
- 3pt: 9x9 그리드 렌더링 및 셀 탭 인터랙션
- 2pt: 목표 편집 모달/상세 진입
- 2pt: 로컬 DB 스키마 초안
#### 목표 합계: 10pt

### Sprint 2 (Release 1 - 저장/상태)
#### 스토리
- 3pt: 상태(TODO/DOING/DONE) 전환 UI 및 색상 규칙
- 3pt: 자동 저장 로직(쓰로틀 기준 포함)
- 2pt: 목표별 메모 저장/조회
- 1pt: 로딩/빈 상태 처리
#### 목표 합계: 9pt

### Sprint 3 (Release 1 - 안정화)
#### 스토리
- 3pt: 리스트/그리드 전환 및 데이터 일관성 점검
- 2pt: 날짜 범위 입력/표시
- 2pt: 간단 회귀 테스트 체크리스트 작성
#### 목표 합계: 7pt

### Sprint 4 (Release 2 - UX)
#### 스토리
- 3pt: 코어 목표 요약 진행도 UI
- 2pt: 상태 전환 애니메이션(기본 수준)
- 2pt: 회고 보기 방식 개선(카드/리스트)
#### 목표 합계: 7pt

### Sprint 5 (Release 3 - Gamification 설계)
#### 스토리
- 2pt: 완료 이펙트 컨셉 정의(모션 스펙)
- 2pt: 진행도 수치화 규칙 정의
- 2pt: LLM 연계 확장 포인트 문서화
#### 목표 합계: 6pt

## 5) 기술 리스크 및 트레이드오프
- 웹(IndexedDB) 안정성: 브라우저별 차이 검증 필요
- 9x9 매핑 로직: 데이터 모델과 UI 매칭 정확성 중요
- 향후 게임화 요구: 이벤트/진행도 계산 방식 설계 필요
- 로그인 부재: 기기 변경 시 데이터 이관 전략 필요

## 6) 확인이 필요한 질문/가정
- 9x9 고정 구조인가? (가변 목표 수 허용 여부)
- 상태 외에 마감일/알림이 필요한가?
- 회고는 목표별 단일 메모인가, 여러 기록 로그인가?
- Flutter 스택 사용에 동의하는가?
- MVP에서 내보내기(이미지/PDF)는 제외해도 되는가?
